-- If LuaRocks is installed, make sure that packages installed through it are
-- found (e.g. lgi). If LuaRocks is not installed, do nothing.
pcall(require, "luarocks.loader")

-- Standard awesome library
local awful = require("awful")
require("awful.autofocus")

-- Error handling
require("modules.error_handling")

-- Variable definitions
local config_var = require("config.variables")
require("modules.beautiful_theme")
local my_wibox = require("modules.my_wibox")
local widgets = require("modules.widgets")
local signals = require("modules.my_signals")
local keybinds = require("modules.my_keybinds")

-- Table of layouts to cover with awful.layout.inc, order matters.
awful.layout.layouts = config_var.layouts

-- For each Screen
awful.screen.connect_for_each_screen(function(s)
  s.padding = config_var.screen_padding
  -- Each screen has its own tag table.
  awful.tag({ "1", "2", "3", "4", "5", "6", "7", "8", "9" }, s, awful.layout.layouts[1])
  -- Tag layout Change Signal
  -- for _, t in pairs(s.tags) do
  --   t:connect_signal("property::layout", function()
  --     widgets.current_tag_layout_change(t)
  --   end)
  -- end
  -- Create Wibox
  my_wibox.build_wibox(s)
end)

-- Rules
awful.rules.rules = require("modules.my_rules").my_rules

-- Signals
signals.build_signals(widgets)

-- Global Keybinds
keybinds.build_globalKeys()

-- Autostart
awful.spawn.once("my-awesome-autostart &")
